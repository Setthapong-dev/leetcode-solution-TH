# 2666. Allow One Function Call

## คำอธิบายโจทย์
สร้างฟังก์ชัน `once(fn)` ที่รับฟังก์ชัน `fn` และคืนค่าฟังก์ชันใหม่ที่สามารถเรียกได้เพียงครั้งเดียว

ฟังก์ชันที่คืนมาจะ:
- เรียกฟังก์ชัน `fn` ครั้งแรกที่เรียกใช้และคืนค่าผลลัพธ์
- ครั้งถัดไปจะคืนค่า `undefined` โดยไม่เรียกฟังก์ชัน `fn`

## ตัวอย่างการใช้งาน
```javascript
// ตัวอย่างที่ 1: ฟังก์ชันรับ 3 parameters
let fn = (a, b, c) => (a + b + c);
let onceFn = once(fn);

onceFn(1, 2, 3); // 6
onceFn(2, 3, 6); // undefined (ไม่เรียก fn)

// ตัวอย่างที่ 2: ฟังก์ชันรับ 1 parameter
let fn2 = (x) => x * x;
let onceFn2 = once(fn2);

onceFn2(5); // 25
onceFn2(10); // undefined (ไม่เรียก fn2)

// ตัวอย่างที่ 3: ฟังก์ชันไม่รับ parameter
let fn3 = () => "Hello World";
let onceFn3 = once(fn3);

onceFn3(); // "Hello World"
onceFn3(); // undefined (ไม่เรียก fn3)
```

## วิธีแก้ไข
ใช้ **Closure** เพื่อเก็บสถานะ `called` และ **Rest Parameter** เพื่อรับ arguments ทั้งหมด

### ขั้นตอนการแก้ไข:
1. สร้างฟังก์ชัน `once(fn)` ที่รับฟังก์ชัน `fn`
2. สร้างตัวแปร `called = false` เพื่อเก็บสถานะการเรียกใช้
3. คืนค่าฟังก์ชันใหม่ที่รับ `...args`
4. ในฟังก์ชันที่คืนมา:
   - ถ้า `!called` ให้ตั้ง `called = true` และเรียก `fn(...args)`
   - ถ้า `called` แล้ว ให้คืนค่า `undefined`

## ความรู้ที่ได้
- **Closure**: ฟังก์ชันที่คืนมามีการเข้าถึงตัวแปรใน scope ของฟังก์ชันแม่
- **State Management**: การจัดการสถานะของตัวแปรใน Closure
- **Rest Parameter** (`...args`): ใช้รับ arguments หลายตัว
- **Spread Operator** (`...args`): ใช้ส่ง arguments ไปให้ฟังก์ชันอื่น
- **Higher-order Function**: ฟังก์ชันที่รับฟังก์ชันอื่นเป็น parameter
- **Function Wrapping**: การห่อหุ้มฟังก์ชันด้วยฟังก์ชันอื่น

## หลักการทำงาน
ฟังก์ชัน `once` จะสร้าง Closure ที่เก็บตัวแปร `called` ไว้ ทุกครั้งที่เรียกฟังก์ชันที่คืนมา จะตรวจสอบสถานะ `called` และเรียกฟังก์ชัน `fn` เฉพาะครั้งแรกเท่านั้น

## การใช้งานที่พบบ่อย
- **Event Handlers**: ป้องกันการเรียก event handler หลายครั้ง
- **API Calls**: จำกัดการเรียก API ให้เรียกได้เพียงครั้งเดียว
- **Initialization**: เรียกฟังก์ชัน initialization เพียงครั้งเดียว
- **Caching**: เก็บผลลัพธ์จากการเรียกครั้งแรก
- **Rate Limiting**: จำกัดการเรียกฟังก์ชันในระยะเวลาหนึ่ง

## เทคนิคการใช้งาน
- ใช้ `called` เป็น boolean flag เพื่อติดตามสถานะ
- ใช้ `...args` เพื่อรับ arguments ทั้งหมดที่ส่งเข้ามา
- ใช้ `fn(...args)` เพื่อส่ง arguments ทั้งหมดไปให้ฟังก์ชันเดิม
- คืนค่า `undefined` เมื่อเรียกครั้งที่สอง

## ข้อควรระวัง
- ฟังก์ชันที่คืนมาจะจำสถานะ `called` ไว้ตลอดเวลา
- ถ้าต้องการ reset สถานะ ต้องสร้างฟังก์ชัน `once` ใหม่
- การเรียกครั้งแรกจะคืนค่าผลลัพธ์ของฟังก์ชันเดิม
- การเรียกครั้งถัดไปจะคืนค่า `undefined` เสมอ
